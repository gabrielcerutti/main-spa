{"version":3,"sources":["components/Header/logo_triunfador.jpg","components/Header/AppHeader.tsx","assets/images/triunfador.jpg","pages/Home.tsx","pages/About.tsx","components/MicroFrontend/MicroFrontendFunc.jsx","Microfrontends.tsx","components/MicroFrontend/Workspace.jsx","pages/NotFound.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["AppHeader","className","src","logo","alt","to","Home","document","title","triunfador","href","target","rel","About","useStyles","makeStyles","loading","margin","position","top","left","transform","loadingIndicator","color","error","MicroFrontend","id","microId","name","host","loadType","buildMode","basePath","history","console","log","microModule","classes","useState","status","setStatus","parseHost","url","URL","port","protocol","hostname","useEffect","baseHost","window","render","renderMicroFrontend","scriptId","getElementById","fetch","then","res","json","manifest","script","createElement","crossOrigin","files","onload","head","appendChild","undefined","style","catch","message","chunkCount","Object","keys","filter","key","endsWith","forEach","_","arr","length","path","Error","body","existingScript","removeEventListener","unMount","CircularProgress","Typography","variant","display","gutterBottom","defaultProps","microxHost","process","microyHost","MicroX","MicroY","theme","content","minWidth","width","breakpoints","up","overflowY","overflowX","maxHeight","height","background","border","transitions","create","easing","sharp","duration","leavingScreen","Workspace","children","NotFound","generateClassName","createGenerateClassName","disableGlobal","productionPrefix","seed","App","StylesProvider","basename","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.edf86b7a.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo_triunfador.2f042067.jpg\";","import { NavLink } from 'react-router-dom';\r\nimport logo from './logo_triunfador.jpg';\r\nimport './AppHeader.scss';\r\n\r\nconst AppHeader = () => (\r\n  <header className=\"MainSpa-header\">\r\n    <div>\r\n      <img src={logo} className=\"logo\" alt=\"logo\" />\r\n      <h1>\r\n        <NavLink to=\"/\">Main SPA</NavLink>\r\n      </h1>\r\n    </div>\r\n    <nav>\r\n      <ol className=\"center-column\">\r\n        <li>\r\n          <NavLink to=\"/\">Home</NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to=\"/micro-x\">Micro App X</NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to=\"/micro-y\">Micro App Y</NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to=\"/about\">About</NavLink>\r\n        </li>\r\n      </ol>\r\n    </nav>\r\n  </header>\r\n);\r\n\r\nexport default AppHeader;\r\n","export default __webpack_public_path__ + \"static/media/triunfador.9629e99e.jpg\";","import triunfador from '../assets/images/triunfador.jpg';\r\nimport '../App.scss';\r\n\r\nconst Home = () => {\r\n  document.title = 'Main SPA | Home';\r\n  return (\r\n    <div>\r\n      <header className=\"Home-header\">\r\n        <img src={triunfador} className=\"Home-logo\" alt=\"logo\" />\r\n        <p>\r\n          Main SPA (Single Page Application) is a Lightweight Container Application for\r\n          Micro-Frontends.\r\n        </p>\r\n        <a\r\n          className=\"App-link\"\r\n          href=\"https://martinfowler.com/articles/micro-frontends.html\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Learn Micro-Frontends Concepts!\r\n        </a>\r\n      </header>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import '../App.scss';\r\n\r\nconst About = () => {\r\n  document.title = 'Main SPA | About';\r\n  return (\r\n    <main className=\"About-main\">\r\n      <div className=\"About-container\">\r\n        <h2>About this site</h2>\r\n        <p>\r\n          Main SPA was created by{' '}\r\n          <a className=\"App-link\" href=\"https://www.linkedin.com/in/gabrielcerutti/\">\r\n            Gabriel Cerutti\r\n          </a>{' '}\r\n          to demonstrate just one way that micro frontends can be implemented. Inspired by{' '}\r\n          <a className=\"App-link\" href=\"https://twitter.com/thecamjackson\">\r\n            Cam Jackson\r\n          </a>{' '}\r\n          demo, check out the{' '}\r\n          <a\r\n            className=\"App-link\"\r\n            href=\"https://martinfowler.com/articles/micro-frontends.html\"\r\n          >\r\n            long-form article that Cam wrote for martinfowler.com\r\n          </a>\r\n          .\r\n        </p>\r\n        <p>\r\n          Micro frontends is an architectural style where independently deliverable\r\n          frontend applications are composed into a greater whole. It&apos;s useful for\r\n          breaking up monolithic frontend codebases into smaller, simpler applications\r\n          that can be delivered to production by multiple teams independently.\r\n        </p>\r\n        <div className=\"About-p\">\r\n          If you just want to read the source code for yourself, it&apos;s all available\r\n          on Github at\r\n          <ul className=\"About-list\">\r\n            <li>\r\n              <a className=\"App-link\" href=\"https://github.com/gabrielcerutti/main-spa\">\r\n                https://github.com/gabrielcerutti/main-spa\r\n              </a>\r\n            </li>\r\n            <li>\r\n              <a\r\n                className=\"App-link\"\r\n                href=\"https://github.com/gabrielcerutti/micro-frontend-x\"\r\n              >\r\n                https://github.com/gabrielcerutti/micro-frontend-x\r\n              </a>\r\n            </li>\r\n            <li>\r\n              <a\r\n                className=\"App-link\"\r\n                href=\"https://github.com/gabrielcerutti/micro-frontend-y\"\r\n              >\r\n                https://github.com/gabrielcerutti/micro-frontend-y\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <p>\r\n          Also, check out the CRA microfrontend-typescript template, it&apos;s available\r\n          on npm registry at{' '}\r\n          <a\r\n            className=\"App-link\"\r\n            href=\"https://www.npmjs.com/package/cra-template-microfrontend-typescript\"\r\n          >\r\n            https://www.npmjs.com/package/cra-template-microfrontend-typescript\r\n          </a>\r\n          .\r\n        </p>\r\n        <p>Reach out to me for any question, I will be glad to help you out :)</p>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default About;\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  loading: {\r\n    margin: '0',\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n  },\r\n  loadingIndicator: {\r\n    color: '#282c34',\r\n  },\r\n  error: {\r\n    margin: '0',\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n  },\r\n}));\r\n\r\nconst MicroFrontend = ({\r\n  id,\r\n  microId,\r\n  name,\r\n  host,\r\n  loadType,\r\n  buildMode,\r\n  basePath,\r\n  history,\r\n}) => {\r\n  console.log('MicroFrontend rendering...');\r\n  document.title = 'Main SPA | ' + name;\r\n  const classes = useStyles();\r\n  const [status, setStatus] = useState('loading');\r\n\r\n  const renderMicroFrontend = () => {\r\n    const baseHost = parseHost(host);\r\n    console.log(`Host is ${baseHost}`);\r\n\r\n    if (buildMode === 'regular') {\r\n      window[`render${microId}`](`${microId}-container`, {\r\n        basePath: basePath,\r\n        host: baseHost,\r\n        history: history,\r\n      });\r\n    } else {\r\n      // library mode\r\n      window[microId].render(`${microId}-container`, {\r\n        basePath: basePath,\r\n        host: baseHost,\r\n        history: history,\r\n      });\r\n    }\r\n  };\r\n\r\n  const parseHost = (host) => {\r\n    let url = new URL(host);\r\n    let port = url.port !== '' ? ':' + url.port : '';\r\n    return `${url.protocol}//${url.hostname}${port}`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === 'done') {\r\n      renderMicroFrontend();\r\n    }\r\n  }, [status]);\r\n\r\n  useEffect(() => {\r\n    let baseHost = parseHost(host);\r\n    console.log(`Host is ${baseHost}`);\r\n\r\n    const scriptId = `micro-frontend-script-${id}`;\r\n\r\n    const existingScript = document.getElementById(scriptId);\r\n    if (existingScript) {\r\n      setStatus('done');\r\n      return;\r\n    }\r\n\r\n    if (loadType === 'not-optimized') {\r\n      // This is a regular React build but in one file (without code splitting)\r\n      fetch(`${host}/asset-manifest.json`)\r\n        .then((res) => res.json())\r\n        .then((manifest) => {\r\n          const script = document.createElement('script');\r\n          script.id = scriptId;\r\n          script.crossOrigin = '';\r\n          script.src = `${baseHost}${manifest.files['main.js']}`;\r\n          script.onload = () => {\r\n            setStatus('done');\r\n          };\r\n          document.head.appendChild(script);\r\n          const css = manifest.files['main.css'];\r\n          if (css !== undefined) {\r\n            const style = document.createElement('link');\r\n            style.rel = 'stylesheet';\r\n            style.href = `${baseHost}${manifest.files['main.css']}`;\r\n            document.head.appendChild(style);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(`Error loading micro-frontend ${id} - ${error.message}`);\r\n          setStatus('error');\r\n        });\r\n    } else if (loadType === 'optimized') {\r\n      // This is a regular React build using code splitting\r\n      fetch(`${host}/asset-manifest.json`)\r\n        .then((res) => res.json())\r\n        .then((manifest) => {\r\n          let chunkCount = -1;\r\n          Object.keys(manifest['files'])\r\n            .filter((key) => key.endsWith('.js'))\r\n            .forEach((key, _, arr) => {\r\n              if (chunkCount < 0) {\r\n                chunkCount = arr.length;\r\n              }\r\n              const path = `${baseHost}${manifest['files'][key]}`;\r\n              const script = document.createElement('script');\r\n              if (key === 'main.js') {\r\n                script.id = scriptId;\r\n              }\r\n              script.onload = () => {\r\n                chunkCount--;\r\n                if (chunkCount === 0) {\r\n                  setStatus('done');\r\n                }\r\n              };\r\n              script.src = path;\r\n              document.head.appendChild(script);\r\n            });\r\n        })\r\n        .catch((error) => {\r\n          console.error(`Error loading micro-frontend ${id} - ${error.message}`);\r\n          setStatus('error');\r\n        });\r\n    } else if (loadType === 'bundle') {\r\n      // This is just a bundle file (no manifest)\r\n      const script = document.createElement('script');\r\n\r\n      script.id = scriptId;\r\n      script.src = host;\r\n\r\n      document.body.appendChild(script);\r\n      script.onload = () => {\r\n        setStatus('done');\r\n      };\r\n    } else {\r\n      throw new Error('You must define a loadType.');\r\n    }\r\n\r\n    return function cleanup() {\r\n      const scriptId = `micro-frontend-script-${microId}`;\r\n      const existingScript = document.getElementById(scriptId);\r\n      if (existingScript) {\r\n        existingScript.removeEventListener('load');\r\n      }\r\n\r\n      if (buildMode === 'regular') {\r\n        if (window[`unmount${microId}`]) {\r\n          window[`unmount${microId}`](`${microId}-container`);\r\n        }\r\n      } else {\r\n        if (window[microId]) {\r\n          window[microId].unMount(`${microId}-container`);\r\n        }\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  let microModule;\r\n  if (status === 'loading') {\r\n    microModule = (\r\n      <div className={classes.loading}>\r\n        <CircularProgress className={classes.loadingIndicator}></CircularProgress>\r\n      </div>\r\n    );\r\n  } else if (status === 'done') {\r\n    microModule = <div id={`${microId}-container`}></div>;\r\n  } else if (status === 'error') {\r\n    microModule = (\r\n      <div className={classes.error}>\r\n        <Typography variant=\"overline\" display=\"block\" gutterBottom>\r\n          Oops! An error occurred loading the micro-app, please refresh the page.\r\n        </Typography>\r\n      </div>\r\n    );\r\n  } else {\r\n    microModule = (\r\n      <div className={classes.error}>\r\n        <Typography variant=\"overline\" display=\"block\" gutterBottom>\r\n          Oops!An unexpected error occurred, please try refreshing the page.\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{microModule}</>;\r\n};\r\n\r\nMicroFrontend.defaultProps = {\r\n  document,\r\n  window,\r\n  loadType: 'not-optimized',\r\n  buildMode: 'library',\r\n};\r\n\r\nMicroFrontend.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  host: PropTypes.string.isRequired,\r\n  basePath: PropTypes.string.isRequired,\r\n  microId: PropTypes.string.isRequired,\r\n  document: PropTypes.object,\r\n  loadType: PropTypes.oneOf(['optimized', 'not-optimized', 'bundle']).isRequired,\r\n  buildMode: PropTypes.oneOf(['library', 'regular']),\r\n  window: PropTypes.object,\r\n  history: PropTypes.object,\r\n  classes: PropTypes.any,\r\n};\r\n\r\nexport default MicroFrontend;\r\n","import MicroFrontend from './components/MicroFrontend/MicroFrontendFunc';\r\n\r\nconst microxHost = process.env.REACT_APP_MICRO_X_HOST ?? '';\r\nconst microyHost = process.env.REACT_APP_MICRO_Y_HOST ?? '';\r\n\r\nexport const MicroX = () => {\r\n  return (\r\n    <MicroFrontend\r\n      id={1}\r\n      name=\"Micro-Frontend X\"\r\n      microId=\"MicroAppX\"\r\n      host={microxHost}\r\n      basePath=\"/micro-x\"\r\n      loadType=\"not-optimized\"\r\n      buildMode=\"library\"\r\n    />\r\n  );\r\n};\r\n\r\nexport const MicroY = () => {\r\n  return (\r\n    <MicroFrontend\r\n      id={2}\r\n      name=\"Micro-Frontend Y\"\r\n      microId=\"MicroAppY\"\r\n      host={microyHost}\r\n      basePath=\"/micro-y\"\r\n      loadType=\"optimized\"\r\n      buildMode=\"regular\"\r\n    />\r\n  );\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  content: {\r\n    minWidth: 0,\r\n    width: '100%',\r\n    display: 'block',\r\n    [theme.breakpoints.up('sm')]: {\r\n      overflowY: 'auto',\r\n      overflowX: 'hidden',\r\n      maxHeight: `calc(100vh - 100px)`,\r\n      '&::-webkit-scrollbar': {\r\n        width: 8,\r\n        height: 8,\r\n      },\r\n      '&::-webkit-scrollbar-thumb': {\r\n        background: 'grey',\r\n        border: 'none',\r\n      },\r\n    },\r\n    overflowY: 'auto',\r\n    overflowX: 'hidden',\r\n    maxHeight: `calc(100vh - 100px)`,\r\n    '&::-webkit-scrollbar': {\r\n      width: 8,\r\n      height: 8,\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n      background: 'grey',\r\n      border: 'none',\r\n    },\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    '-webkit-overflow-scrolling': 'touch',\r\n  },\r\n}));\r\n\r\nconst Workspace = ({ children }) => {\r\n  console.log('Workspace rendering...');\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <main id=\"main-spa-container\" className={classes.content}>\r\n      {children}\r\n    </main>\r\n  );\r\n};\r\n\r\nWorkspace.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default Workspace;\r\n","import { NavLink } from 'react-router-dom';\r\nimport '../App.scss';\r\n\r\nconst NotFound = () => {\r\n  document.title = 'Main SPA | NotFound';\r\n  return (\r\n    <main className=\"Notfound-main\">\r\n      <div className=\"Notfound-container\">\r\n        <h2>Oops! Sorry, Page Not Found</h2>\r\n        <h3>\r\n          You should probably go back to{' '}\r\n          <NavLink className=\"App-link\" to=\"/\">\r\n            Home\r\n          </NavLink>\r\n        </h3>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import './App.scss';\r\nimport AppHeader from './components/Header/AppHeader';\r\nimport { HashRouter, Routes, Route } from 'react-router-dom';\r\nimport Home from './pages/Home';\r\nimport About from './pages/About';\r\nimport { MicroX, MicroY } from './Microfrontends';\r\nimport Workspace from './components/MicroFrontend/Workspace';\r\nimport { StylesProvider, createGenerateClassName } from '@material-ui/core/styles';\r\nimport NotFound from './pages/NotFound';\r\n\r\n// CSS class name generation, we are using this in order to not collision names with the micro-frontends\r\nconst generateClassName = createGenerateClassName({\r\n  disableGlobal: false,\r\n  productionPrefix: 'mainspa',\r\n  seed: 'mainspa',\r\n});\r\n\r\nfunction App() {\r\n  console.log(`Environment is ${process.env.NODE_ENV}`);\r\n  console.log(`Public URL is ${process.env.PUBLIC_URL}`);\r\n  return (\r\n    <div className=\"Main-Spa\">\r\n      {/* Use HashRouter if your host doesn't support browser history (like GitHub Pages) */}\r\n      {/* Use BrowserRouter for a production app hosted in its own domain */}\r\n      {/* <HashRouter> */}\r\n      <HashRouter>\r\n        <StylesProvider generateClassName={generateClassName}>\r\n          <AppHeader />\r\n          <Workspace>\r\n            <Routes basename={'/'}>\r\n              <Route path=\"/about\" element={<About />} />\r\n              <Route path=\"/micro-x/*\" element={<MicroX />} />\r\n              <Route path=\"/micro-y/*\" element={<MicroY />} />\r\n              <Route path=\"/\" element={<Home />} />\r\n              <Route path=\"/*\" element={<NotFound />} />\r\n            </Routes>\r\n          </Workspace>\r\n        </StylesProvider>\r\n      </HashRouter>\r\n      {/* </HashRouter> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}